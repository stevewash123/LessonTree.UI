<div class="container">
    <h1 class="title">Welcome to LessonTree</h1>

    <!-- Loading notice for demo environment initialization -->
    @if (loadingState.isLoading) {
      <div class="loading-notice">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        <p class="loading-message">{{ loadingState.message }}</p>
        @if (loadingState.showTimeout && loadingState.timeoutMessage) {
          <p class="timeout-message">{{ loadingState.timeoutMessage }}</p>
        }
      </div>
    }

    <img src="/assets/images/child_reading_apple_tree.jpg" alt="Kids under a tree" class="background-image">

    <!-- Simplified Layout -->
    <div class="simple-layout">
      <!-- Demo Information -->
      <p class="demo-description">Demo includes high school courses: Algebra II, American History, Biology, English Literature, Chemistry</p>

      <!-- Login Form with Guest Credentials -->
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
        <mat-form-field>
          <mat-label>Username</mat-label>
          <input matInput formControlName="username" required>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Password</mat-label>
          <input matInput type="password" formControlName="password" required>
        </mat-form-field>

        <!-- Guest Credentials Text Above Button -->
        <p class="guest-credentials-text">Guest login: <strong>guest</strong> / <strong>Guest123!</strong></p>

        <!-- Guest Login Button (styled like Refresh Demo Data button) -->
        <button mat-raised-button color="primary" type="button" (click)="fillGuestCredentials()"
                class="guest-login-button">
          <mat-icon>person</mat-icon>
          Login as Guest
        </button>

        <!-- Error message display -->
        @if (errorMessage) {
          <div class="error-message">
            {{ errorMessage }}
          </div>
        }

        <button mat-raised-button color="primary" type="submit" [disabled]="isLoginDisabled">
          @if (isLoading) {
            Logging in...
          } @else if (loadingState.isLoading) {
            Please wait - Initializing...
          } @else {
            Login
          }
        </button>
      </form>
    </div>

    <!-- Bottom Panel: Reseed Button -->
    <div class="bottom-panel">
      <div class="reseed-section">
        <button mat-raised-button color="primary" type="button"
                (click)="onReseedDemo()"
                [disabled]="isReseedingDemo || loadingState.isLoading"
                class="reseed-button">
          <mat-icon>refresh</mat-icon>
          {{ isReseedingDemo ? 'Refreshing Demo Data...' : 'Refresh Demo Data' }}
        </button>
        <p class="reseed-note">Demo data is automatically refreshed every 24 hours.</p>
      </div>
    </div>
  </div>