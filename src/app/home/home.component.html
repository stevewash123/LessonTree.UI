<!-- **COMPLETE FILE** - Left sidebar navigation layout -->
<!-- RESPONSIBILITY: Left sidebar navigation with header toolbar -->
<!-- DOES NOT: Handle complex responsive layouts -->
<!-- CALLED BY: HomeComponent -->

<mat-sidenav-container class="sidenav-container">
  <!-- Left Sidebar Navigation -->
  <mat-sidenav #sidenav
               mode="side"
               opened="true"
               class="sidenav"
               [fixedInViewport]="true"
               [fixedTopGap]="0">

    <!-- Sidebar Header -->
    <div class="sidenav-header">
      <div class="logo-section">
        <mat-icon class="logo-icon">school</mat-icon>
        <span class="logo-text">LessonTree</span>
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="sidenav-nav">
      <!-- Main Navigation -->
      <a mat-button
         routerLink="/home/lesson-tree"
         routerLinkActive="active-link"
         class="nav-item primary-nav">
        <mat-icon>account_tree</mat-icon>
        <span>Lesson Tree</span>
      </a>

      @if (authService.hasRole('Admin')) {
        <a mat-button
           routerLink="/home/account"
           routerLinkActive="active-link"
           class="nav-item primary-nav">
          <mat-icon>admin_panel_settings</mat-icon>
          <span>Account Management</span>
        </a>
      }

      <!-- Course Actions -->
      <button mat-button
              (click)="openCourseFilterDialog()"
              class="nav-item">
        <mat-icon>filter_list</mat-icon>
        <span>Filter Courses</span>
      </button>

      <!-- Drag Mode Submenu -->
      <div class="submenu-section">
        <div class="submenu-header" (click)="toggleDragModeSubmenu()">
          <mat-icon class="submenu-icon">drive_file_move</mat-icon>
          <span class="submenu-title">Drag Mode</span>
          <mat-icon class="expand-icon" [class.expanded]="dragModeExpanded">expand_more</mat-icon>
        </div>
        @if (dragModeExpanded) {
          <div class="submenu-items">
            <button mat-button
                    (click)="setDragMode('move')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.dragMode() === 'move'">
              <mat-icon>drive_file_move</mat-icon>
              <span>Move Nodes</span>
            </button>
            <button mat-button
                    (click)="setDragMode('copy')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.dragMode() === 'copy'">
              <mat-icon>content_copy</mat-icon>
              <span>Copy Nodes</span>
            </button>
          </div>
        }
      </div>

      <!-- Layout Mode Submenu -->
      <div class="submenu-section">
        <div class="submenu-header" (click)="toggleLayoutModeSubmenu()">
          <mat-icon class="submenu-icon">view_quilt</mat-icon>
          <span class="submenu-title">Layout</span>
          <mat-icon class="expand-icon" [class.expanded]="layoutModeExpanded">expand_more</mat-icon>
        </div>
        @if (layoutModeExpanded) {
          <div class="submenu-items">
            <button mat-button
                    (click)="setLayoutMode('tree-details')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.layoutMode() === 'tree-details'">
              <mat-icon>account_tree</mat-icon>
              <span>Tree + Details</span>
            </button>
            <button mat-button
                    (click)="setLayoutMode('tree-calendar')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.layoutMode() === 'tree-calendar'">
              <mat-icon>calendar_month</mat-icon>
              <span>Tree + Calendar</span>
            </button>
            <button mat-button
                    (click)="setLayoutMode('calendar-details')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.layoutMode() === 'calendar-details'">
              <mat-icon>view_day</mat-icon>
              <span>Calendar + Details</span>
            </button>
          </div>
        }
      </div>

      <!-- Divider -->
      <mat-divider class="nav-divider"></mat-divider>

      <!-- User Actions -->
      <button mat-button
              (click)="openUserConfig()"
              class="nav-item">
        <mat-icon>person_settings</mat-icon>
        <span>User Settings</span>
      </button>

      <button mat-button
              (click)="openScheduleConfig()"
              class="nav-item">
        <mat-icon>schedule</mat-icon>
        <span>Schedule Config</span>
      </button>

      <button mat-button
              (click)="generateWeeklyReport()"
              class="nav-item">
        <mat-icon>print</mat-icon>
        <span>Weekly Report</span>
      </button>

      <!-- Logout at bottom -->
      <div class="nav-spacer"></div>
      <button mat-button
              (click)="logout()"
              class="nav-item logout-item">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </button>
    </nav>
  </mat-sidenav>

  <!-- Main Content Area -->
  <mat-sidenav-content class="main-content">
    <!-- Simplified Top Toolbar -->
    <mat-toolbar #toolbar color="primary" class="top-toolbar">
      <button mat-icon-button
              (click)="sidenav.toggle()"
              class="menu-toggle"
              matTooltip="Toggle Navigation">
        <mat-icon>menu</mat-icon>
      </button>

      <span class="page-title">{{ getPageTitle() }}</span>
      <span class="spacer"></span>
    </mat-toolbar>

    <!-- Main Content Area -->
    <div class="content-container" [style.paddingTop.px]="toolbarHeight">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>