<!-- **COMPLETE FILE** - Left sidebar navigation layout -->
<!-- RESPONSIBILITY: Left sidebar navigation with header toolbar -->
<!-- DOES NOT: Handle complex responsive layouts -->
<!-- CALLED BY: HomeComponent -->

<mat-sidenav-container class="sidenav-container">
  <!-- Left Sidebar Navigation -->
  <mat-sidenav #sidenav
               mode="side"
               opened="true"
               class="sidenav"
               [class.collapsed]="!navExpanded"
               [fixedInViewport]="true"
               [fixedTopGap]="0">

    <!-- Collapsed State: Thin Strip with Graduation Cap -->
    @if (!navExpanded) {
      <div class="collapsed-nav">
        <button mat-icon-button
                (click)="toggleNavigation()"
                class="expand-trigger"
                matTooltip="Expand Navigation"
                matTooltipPosition="right">
          <mat-icon>school</mat-icon>
        </button>
      </div>
    }

    <!-- Expanded State: Full Navigation -->
    @if (navExpanded) {
      <!-- Sidebar Header -->
      <div class="sidenav-header">
        <div class="logo-section">
          <mat-icon class="logo-icon">school</mat-icon>
          <span class="logo-text">LessonTree</span>
          <button mat-icon-button
                  (click)="toggleNavigation()"
                  class="collapse-trigger"
                  matTooltip="Collapse Navigation">
            <mat-icon>chevron_left</mat-icon>
          </button>
        </div>
      </div>

      <!-- Navigation Menu -->
      <nav class="sidenav-nav">
      @if (authService.hasRole('Admin')) {
        <a mat-button
           routerLink="/home/account"
           routerLinkActive="active-link"
           class="nav-item primary-nav">
          <mat-icon>admin_panel_settings</mat-icon>
          <span>Account Management</span>
        </a>
      }

      <!-- Layout Mode Submenu (Priority 1) -->
      <div class="submenu-section">
        <div class="submenu-header" (click)="toggleLayoutModeSubmenu()">
          <span class="submenu-title">Layout</span>
          <mat-icon class="expand-icon" [class.expanded]="layoutModeExpanded">expand_more</mat-icon>
        </div>
        @if (layoutModeExpanded) {
          <div class="submenu-items">
            <button mat-button
                    (click)="setLayoutMode('tree-details')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.layoutMode() === 'tree-details'">
              <span>Tree + Details</span>
              @if (toolbarControls.layoutMode() === 'tree-details') {
                <mat-icon class="check-icon">check</mat-icon>
              }
            </button>
            <button mat-button
                    (click)="setLayoutMode('tree-calendar')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.layoutMode() === 'tree-calendar'">
              <span>Tree + Calendar</span>
              @if (toolbarControls.layoutMode() === 'tree-calendar') {
                <mat-icon class="check-icon">check</mat-icon>
              }
            </button>
            <button mat-button
                    (click)="setLayoutMode('calendar-details')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.layoutMode() === 'calendar-details'">
              <span>Calendar + Details</span>
              @if (toolbarControls.layoutMode() === 'calendar-details') {
                <mat-icon class="check-icon">check</mat-icon>
              }
            </button>
          </div>
        }
      </div>

      <!-- Drag Mode Submenu (Priority 2) -->
      <div class="submenu-section">
        <div class="submenu-header" (click)="toggleDragModeSubmenu()">
          <span class="submenu-title">Drag Mode</span>
          <mat-icon class="expand-icon" [class.expanded]="dragModeExpanded">expand_more</mat-icon>
        </div>
        @if (dragModeExpanded) {
          <div class="submenu-items">
            <button mat-button
                    (click)="setDragMode('move')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.dragMode() === 'move'">
              <span>Move Nodes</span>
              @if (toolbarControls.dragMode() === 'move') {
                <mat-icon class="check-icon">check</mat-icon>
              }
            </button>
            <button mat-button
                    (click)="setDragMode('copy')"
                    class="nav-item submenu-item"
                    [class.active]="toolbarControls.dragMode() === 'copy'">
              <span>Copy Nodes</span>
              @if (toolbarControls.dragMode() === 'copy') {
                <mat-icon class="check-icon">check</mat-icon>
              }
            </button>
          </div>
        }
      </div>

      <!-- Divider -->
      <mat-divider class="nav-divider"></mat-divider>

      <!-- User Actions -->
      <button mat-button
              (click)="openUserConfig()"
              class="nav-item">
        <mat-icon>person_settings</mat-icon>
        <span>User Settings</span>
      </button>

      <button mat-button
              (click)="openScheduleConfig()"
              class="nav-item">
        <mat-icon>schedule</mat-icon>
        <span>Schedule Config</span>
      </button>

      <button mat-button
              (click)="generateWeeklyReport()"
              class="nav-item">
        <mat-icon>print</mat-icon>
        <span>Weekly Report</span>
      </button>

      <!-- Low Priority: Filter -->
      <button mat-button
              (click)="openCourseFilterDialog()"
              class="nav-item">
        <mat-icon>filter_list</mat-icon>
        <span>Filter Courses</span>
      </button>

      <!-- Logout at bottom -->
      <div class="nav-spacer"></div>
      <button mat-button
              (click)="logout()"
              class="nav-item logout-item">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </button>
      </nav>
    }
  </mat-sidenav>

  <!-- Main Content Area -->
  <mat-sidenav-content class="main-content">
    <!-- Main Content Area -->
    <div class="content-container">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>