<!-- src/app/lessontree/info-panel/info-panel.component.html -->
<div class="info-panel-wrapper">
    @if (activeNode || mode === 'add') {
      @if ((activeNode?.nodeType === 'Course' && mode !== 'add') || (mode === 'add' && addPanelType === 'Course')) {
        @if (course) {
          <course-panel
            [data]="course"
            [mode]="mode"
            (modeChange)="handleModeChange($event)"
            (courseAdded)="onCourseAdded($event)"
            (courseEdited)="onCourseEdited($event)"
            (addNode)="initiateAddMode(undefined, 'Topic', $event.courseId)"
          ></course-panel>
        }
      }
      @if ((activeNode?.nodeType === 'Topic' && mode !== 'add') || (mode === 'add' && addPanelType === 'Topic')) {
        @if (topic) {
            <topic-panel 
                [data]="topic" 
                [mode]="mode" 
                (modeChange)="handleModeChange($event)" 
                (topicAdded)="onTopicAdded($event)"
                (topicEdited)="onTopicEdited($event)"
            ></topic-panel>
        }
      }
      @if ((activeNode?.nodeType === 'SubTopic' && mode !== 'add') || (mode === 'add' && addPanelType === 'SubTopic')) {
        @if (subtopic) {
          <subtopic-panel
            [data]="subtopic"
            [mode]="mode"
            (modeChange)="handleModeChange($event)"
            (subTopicAdded)="onSubTopicAdded($event)" 
            (subTopicEdited)="onSubTopicEdited($event)"
          ></subtopic-panel>
        }
      }
      @if ((activeNode?.nodeType === 'Lesson' && mode !== 'add') || (mode === 'add' && addPanelType === 'Lesson')) {
        @if (lessonDetail) {
          <lesson-info-panel
            [lessonDetail]="lessonDetail"
            [mode]="mode"
            (modeChange)="handleModeChange($event)"
            (lessonAdded)="onLessonAdded($event)"
            (lessonEdited)="onLessonEdited($event)"
          ></lesson-info-panel>
        }
      }
    } @else {
      <p>Select a node to view or add a new item.</p>
    }
  </div>