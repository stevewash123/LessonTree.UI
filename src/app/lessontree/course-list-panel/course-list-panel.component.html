<div>
    <h2 class="courses-header">Courses</h2>
    @for (course of courses; track $index) {        
      <mat-card class="course-card">
        <mat-list-item>
          <div class="course-item">
            <mat-icon 
              class="expand-icon" 
              (click)="toggleCourse(course.nodeId)"
            >
              {{ expandedCourseIds.includes(course.nodeId) ? 'expand_more' : 'chevron_right' }}
            </mat-icon>
            <span class="course-title">{{ course.title }}</span>
            <span class="course-description">{{ course.description }}</span>
            <span class="course-actions">
              <button mat-icon-button (click)="deleteCourse(course.id)" matTooltip="Delete Course">
                <mat-icon>delete</mat-icon>
              </button>
              <button mat-icon-button (click)="addTopic(course.id)" matTooltip="Add Topic">
                <mat-icon>add_circle</mat-icon>
              </button>
            </span>
          </div>
        </mat-list-item>
        @if (expandedCourseIds.includes(course.nodeId)) {  
          <div class="tree-view-container">
            <app-tree 
              [topics]="course.topics" 
              [courseManagement]="this" 
              [refreshTrigger]="refreshTrigger" 
              (nodeDragStop)="onTopicMoved($event)"
              (nodeSelected)="onNodeSelected($event)"
            ></app-tree>
          </div>
        } 
      </mat-card>
    }
    <div class="add-course-button">
      <button mat-raised-button color="primary" (click)="openAddCourseDialog()">Add Course</button>
    </div>    
  </div>