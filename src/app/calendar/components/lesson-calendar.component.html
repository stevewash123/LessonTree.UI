<!-- src/app/lessontree/calendar/lesson-calendar.component.html - COMPLETE FILE -->
<div class="calendar-container">

    <!-- Main Calendar Content -->

      <div class="calendar-content-wrapper" style="position: relative;">

          <!-- Full Calendar -->
          <full-calendar
            #calendar
            [options]="calendarOptions"
            [deepChangeDetection]="true">
          </full-calendar>

        </div>

      <!-- Material Design Context Menu (unchanged) -->
      <div style="visibility: hidden; position: fixed;"
             [style.left]="contextMenuPosition.x"
             [style.top]="contextMenuPosition.y"
             [matMenuTriggerFor]="contextMenu"
             #contextMenuTrigger="matMenuTrigger">
        </div>

      <mat-menu #contextMenu="matMenu" class="calendar-context-menu">
        @for (action of contextMenuActions; track action.id) {
          <button mat-menu-item (click)="executeContextAction(action)">
            <mat-icon>
              @switch (action.id) {
                @case ('addNonTeaching') { event_busy }
                @case ('editSpecialDay') { edit }
                @case ('deleteSpecialDay') { delete }
                @case ('errorDayInfo') { info }
                @case ('editLesson') { edit_note }
                @case ('deleteLesson') { delete_outline }
                @case ('addLesson') { add_circle_outline }
                @default { event }
              }
            </mat-icon>
            <span>{{ action.label }}</span>
          </button>
        }
      </mat-menu>

      <!-- Subtle Create Schedule Link (bottom right) -->
      <div class="calendar-footer">
        <button
          mat-button
          class="create-schedule-link"
          (click)="openConfigModal()"
          matTooltip="Create a new schedule (rarely needed)">
          Create Schedule
        </button>
      </div>

  </div>

