<!-- src/app/lessontree/info-panel/info-panel.component.html - COMPLETE FILE (OPTIMIZED) -->
<div class="info-panel-wrapper">
    @if (hasSelection() || mode === 'add') {

      @if (showCoursePanel()) {
        @if (course) {
          <course-panel [data]="course"></course-panel>
        }
      }

      @if (showTopicPanel()) {
        @if (topic) {
          <topic-panel [data]="topic"></topic-panel>
        }
      }

      @if (showSubTopicPanel()) {
        @if (subtopic) {
          <subtopic-panel [data]="subtopic"></subtopic-panel>
        }
      }

      @if (showLessonPanel()) {
        @if (lessonDetail) {
          <lesson-info-panel [lessonDetail]="lessonDetail"></lesson-info-panel>
        }
      }

    } @else {
      <div class="no-selection-message">
        <h3>No Selection</h3>
        <p>Select a node from the tree to view its details, or add a new item.</p>

        <!-- Optional: Show selection stats for debugging -->
        @if (selectedEntity(); as entity) {
            <div class="selection-stats">
              <small>Selected: {{ entity.entityType  }}</small>
            </div>
          }
      </div>
    }
  </div>
